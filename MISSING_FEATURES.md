# 누락된 기능 및 개선사항

## 🤖 디스코드 봇 - 추가 필요한 명령어

### 1. 거래 내역 조회 (`/거래내역`)
**현재 상태**: ❌ 미구현
**필요성**: 사용자가 자신의 최근 거래 내역을 확인할 수 있어야 함
```typescript
/거래내역 [개수: 1-50]
```

### 2. 계좌 동결/해제 (`/관리자설정` 서브커맨드에 추가)
**현재 상태**: ⚠️ 부분 구현 (handleFreezeAccount, handleUnfreezeAccount 존재하지만 명령어 미등록)
**해결방법**: `/관리자설정` 명령어에 `계좌동결`, `계좌해제` 서브커맨드 추가 필요

### 3. 잔액 수정 (`/관리자설정` 서브커맨드에 추가)
**현재 상태**: ⚠️ 구현되었지만 명령어 미등록 (handleModifyBalance 메서드 삭제됨)
**해결방법**: `/관리자설정`에 `잔액수정` 서브커맨드 추가 필요

### 4. 계좌 목록 조회 (`/관리자설정` 서브커맨드에 추가)
**현재 상태**: ⚠️ 구현되었지만 명령어 미등록 (handleListAccounts 메서드 삭제됨)
**해결방법**: `/관리자설정`에 `계좌목록` 서브커맨드 추가 필요

### 5. 통계 조회 명령어
**현재 상태**: ❌ 미구현
**필요성**: 서버 통계, 거래량, 시가총액 등 정보 제공
```typescript
/통계
- 총 거래량
- 시가총액
- 활성 사용자 수
- 오늘 거래 건수
```

### 6. 순위표 명령어
**현재 상태**: ❌ 미구현
**필요성**: 자산 순위, 거래량 순위 등
```typescript
/순위표 [유형: 자산/거래량/보유주식]
```

### 7. 주식 정보 상세 조회
**현재 상태**: ⚠️ 부분 구현 (`/주식 가격`만 있음)
**개선방향**: 
- 회사 정보
- 최근 뉴스
- 거래량
- 주주 분포

### 8. 알림 설정
**현재 상태**: ❌ 미구현
**필요성**: 가격 도달 알림, 거래 체결 알림 등
```typescript
/알림설정 [종목코드] [목표가격]
/알림목록
/알림삭제 [알림ID]
```

---

## 🌐 웹 대시보드 - 발견된 문제점

### 1. 차트 성능 문제
**위치**: `client/src/components/trading/stock-chart.tsx`
**문제**: 과도한 디버그 로그 (647, 1417라인)
**해결방법**: 프로덕션 환경에서 디버그 로그 제거

### 2. 번들 크기 경고
**문제**: `index-BsHlMHDU.js` 파일이 879.48 KB (500KB 제한 초과)
**해결방법**: 
- Code splitting 적용
- 동적 import() 사용
- Chart.js 등 큰 라이브러리 lazy loading

### 3. Browserslist 데이터 오래됨
**문제**: caniuse-lite 데이터가 12개월 오래됨
**해결방법**:
```bash
npx update-browserslist-db@latest
```

### 4. 로블록스 연동 UI
**현재 상태**: ❌ 미구현
**필요성**: 
- 웹 대시보드에서 로블록스 연동 상태 표시
- 연동 코드 입력 UI
- 연동 해제 버튼

### 5. 실시간 알림 시스템
**현재 상태**: ⚠️ 부분 구현 (WebSocket 연결은 있지만 UI 알림 없음)
**개선방향**:
- 토스트 알림 컴포넌트 추가
- 거래 체결 시 알림
- 잔액 변동 시 알림

### 6. 포트폴리오 분석 기능 부족
**문제**: 기본 정보만 표시
**개선방향**:
- 수익률 차트
- 자산 배분 파이 차트
- 손익 분석
- 배당 예상

### 7. 거래 내역 필터링
**현재 상태**: ❌ 미구현
**필요성**: 
- 날짜 범위 필터
- 거래 유형 필터
- 금액 범위 필터
- CSV/Excel 다운로드

### 8. 다크 모드
**현재 상태**: ❌ 미구현
**필요성**: 사용자 편의성

### 9. 모바일 반응형
**현재 상태**: ⚠️ 부분 구현
**개선방향**: 
- 차트 모바일 최적화
- 터치 제스처 지원
- 모바일 네비게이션

---

## 🔒 보안 개선사항

### 1. Rate Limiting
**현재 상태**: ❌ 미구현
**필요성**: API 남용 방지
**해결방법**: express-rate-limit 미들웨어 추가

### 2. CSRF 보호
**현재 상태**: ❌ 미구현
**필요성**: 크로스 사이트 요청 위조 방지
**해결방법**: csurf 미들웨어 추가

### 3. Input Validation
**현재 상태**: ⚠️ 부분 구현
**개선방향**: 
- Zod 스키마 검증 강화
- SQL Injection 방지 재확인
- XSS 방지 재확인

### 4. API 키 로테이션
**현재 상태**: ❌ 미구현
**필요성**: 정기적인 API 키 변경
**해결방법**: 키 버전 관리 시스템

---

## 📊 데이터베이스 최적화

### 1. 인덱스 추가 필요
```sql
-- 자주 조회되는 컬럼에 인덱스 추가
CREATE INDEX idx_transactions_guild_created ON transactions(guild_id, created_at);
CREATE INDEX idx_stock_transactions_symbol ON stock_transactions(symbol, created_at);
CREATE INDEX idx_holdings_user_symbol ON holdings(user_id, symbol);
```

### 2. 오래된 데이터 아카이빙
**현재 상태**: ❌ 미구현
**필요성**: 
- 30일 이상 된 거래 내역 아카이브
- Candlestick 데이터 압축
- 성능 유지

### 3. 캐싱 레이어
**현재 상태**: ❌ 미구현
**필요성**: 
- Redis 캐시 추가
- 주식 가격 캐싱 (5초)
- 사용자 정보 캐싱 (1분)

---

## 🎯 우선순위

### High Priority (즉시 처리)
1. ✅ 공용계좌 기능 (완료)
2. ✅ 엑셀 내보내기 (완료)
3. ✅ 로블록스 연동 (완료)
4. ❌ `/거래내역` 명령어
5. ❌ 관리자 계좌 관리 명령어 복원
6. ❌ Rate Limiting 추가

### Medium Priority (1-2주 내)
7. ❌ 통계/순위표 명령어
8. ❌ 번들 크기 최적화
9. ❌ 알림 시스템 UI
10. ❌ 포트폴리오 분석 강화

### Low Priority (장기)
11. ❌ 다크 모드
12. ❌ 데이터 아카이빙
13. ❌ Redis 캐싱
14. ❌ 고급 필터링

---

## 📝 즉시 수정 가능한 간단한 문제들

### 1. 디버그 로그 제거
```typescript
// client/src/components/trading/stock-chart.tsx
// 라인 173, 183, 192, 647, 1417의 console.log 제거
```

### 2. Browserslist 업데이트
```bash
npx update-browserslist-db@latest
```

### 3. 빈 handleModifyBalance, handleListAccounts 복원
이 메서드들이 삭제되었지만 필요하므로 복원 필요

---

## 🚀 다음 작업 추천

1. **거래내역 명령어 추가** (30분)
2. **관리자 서브커맨드 복원** (1시간)
3. **디버그 로그 정리** (15분)
4. **Rate Limiting 추가** (30분)
5. **통계 명령어 구현** (1-2시간)
